# ğŸš€ Lecture 2 â€“ Frontend Authentication & State Management (Gittogether)

This lecture focuses on **building the Login flow**, understanding **CORS**, making **API calls**, and introducing **Redux Toolkit** for global state management.

The goal is to think like a **full-stack engineer**, not just a UI developer.

---

## ğŸ¯ Goal of Lecture 2

- Create a login page
- Bind form fields to state variables
- Make API calls using Axios
- Understand CORS deeply
- Handle cookies correctly
- Introduce Redux Toolkit
- Prepare UI to react to login state

---

## ğŸ§© Creating the Login Page

A dedicated **Login page** is created as a route-level component.

This page is responsible only for:
- Taking user credentials
- Triggering login API
- Showing errors / loading states

No business logic is written here.

---

## ğŸ”— Binding Form Fields to State Variables

Input fields (email & password) are **controlled components**.

Why controlled inputs?
- React becomes the single source of truth
- Easy validation
- Predictable UI behavior
- Required for real-world forms

Each input is bound to a state variable.

---

## ğŸŒ Making API Calls (Axios)

Till now, `fetch` was used for API calls.

Now we switch to **Axios**.

### Why Axios?
- Cleaner syntax
- Automatic JSON handling
- Better error handling
- Supports `withCredentials`
- Industry standard

Axios makes backend integration **simpler and cleaner**.

---

## ğŸ” Fetch vs Axios (Conceptual Difference)

### Fetch
- Native browser API
- More boilerplate
- Manual JSON parsing
- Cookies handling is tricky

### Axios
- External library
- Cleaner API
- Auto JSON parsing
- Built-in support for cookies & interceptors

In production apps, **Axios is preferred**.

---

## ğŸš¨ Understanding CORS Error

CORS error occurs when:
- Frontend and backend are on different origins
- Example:
  - Frontend â†’ localhost:5173
  - Backend â†’ localhost:7777

This is called **Cross-Origin Request**.

Browser blocks the request for security reasons.

---

## ğŸ” Why CORS Happens

- Browser security feature
- Prevents malicious websites from accessing sensitive APIs
- Server must explicitly allow the frontend origin

Same issue was discussed earlier in **Namaste React** as well.

---

## ğŸ› ï¸ Fixing CORS from Backend

CORS is **not a frontend problem**.

It is always fixed from:
- Backend configuration

Steps:
- Install CORS package in backend
- Add CORS middleware
- Allow credentials
- Configure origin properly

This enables frontend to communicate safely.

---

## ğŸª Cookies & withCredentials

Authentication uses **HTTP-only cookies**.

Important rule:
> If cookies are involved, `withCredentials: true` is mandatory.

Without this:
- Token will be set in backend
- Browser will silently drop it
- Login will appear successful but user wonâ€™t stay logged in

So **every auth-related API call must include withCredentials**.

---

## ğŸ§  Why Redux Toolkit is Needed

As the app grows:
- Multiple components need user data
- Navbar needs user photo
- Feed needs user state
- Profile page needs user info

Passing props everywhere is not scalable.

Redux Toolkit solves this.

---

## ğŸª What is App Store (Redux Store)

The **store** is a global container that holds application state.

Why is it called a store?
- It stores the entire appâ€™s shared data
- Any component can read from it
- Any component can update it (via actions)

---

## âš™ï¸ configureStore

`configureStore` is used to create the Redux store.

Responsibilities:
- Combine all slices
- Enable Redux DevTools
- Setup middleware

Once created, the store must be:
- Provided to the entire application

---

## ğŸ§© What Are Slices

Slices are **small pieces of global state**.

Each slice:
- Has its own initial state
- Has reducers (functions to update state)
- Represents one domain of the app

Example domains:
- User
- Feed
- Requests

---

## ğŸ‘¤ User Slice

A `userSlice` is created.

Purpose:
- Store logged-in user data
- Track authentication state
- Share user info across app

User slice becomes the **source of truth** for authentication.

---

## ğŸ¤” Why User Slice is Needed

Without user slice:
- Navbar canâ€™t know if user is logged in
- Profile image canâ€™t be shown
- Auth state becomes inconsistent

With user slice:
- One login updates entire app
- UI reacts automatically
- Clean separation of concerns

---

## ğŸ–¼ï¸ Showing User Photo in Navbar

Once user is logged in:
- User data is saved in Redux store
- Navbar subscribes to user state
- Profile photo is shown dynamically

This creates a **real-world, reactive UI**.

---

## ğŸ§  Backend Thinking Applied to Frontend

- Login page â†’ Controller trigger
- Axios â†’ API client
- Redux store â†’ In-memory database
- Slice â†’ Schema-like structure
- CORS â†’ Security layer

Frontend is treated as a **system**, not just UI.

---

## âœ… Lecture 2 Summary

- Login page created
- Inputs bound to state variables
- Axios introduced for API calls
- CORS error understood deeply
- Backend configured to allow frontend
- Cookies handled using withCredentials
- Redux Toolkit introduced
- Store and slices explained
- User slice created
- Navbar prepared to show user info

---