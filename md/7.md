# ğŸš€ Git-together â€“ Deployment Guide (Namaste Node Season 3, Episode 2)

This README documents **all the exact steps** I followed to deploy the **Git-together** fullâ€‘stack application while learning **Namaste Node â€“ Season 3 (Episode 2)**.

The goal of this deployment was to:

* Deploy a Node.js backend on a Linux server
* Serve a frontend using nginx
* Use PM2 for production process management
* Verify authentication APIs endâ€‘toâ€‘end

This guide can be reused to **reâ€‘deploy the project from scratch**.

---

## ğŸ§± Tech Stack

* **Backend:** Node.js, Express
* **Database:** MongoDB
* **Auth:** JWT + httpOnly Cookies
* **Process Manager:** PM2
* **Web Server / Reverse Proxy:** nginx
* **OS:** Ubuntu (EC2)

---

## ğŸ“ Project Structure

```
Git-together/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ auth.js
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ middlewares/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ package.json
â””â”€â”€ ecosystem (optional)

Git-together-frontend/
â”œâ”€â”€ build/
â””â”€â”€ src/
```

---

## 1ï¸âƒ£ Server Setup (EC2)

* Created an Ubuntu EC2 instance
* Connected using SSH

```bash
ssh -i <key>.pem ubuntu@<PUBLIC_IP>
```

---

## 2ï¸âƒ£ Backend Setup

### Install dependencies

```bash
sudo apt update
sudo apt install nodejs npm nginx -y
```

### Clone backend repository

```bash
git clone <repo-url>
cd Git-together
npm install
```

---

## 3ï¸âƒ£ Express App Configuration

Key points in `src/app.js`:

* `express.json()` enabled
* Cookies enabled
* Routes registered

```js
app.use(express.json());
app.use(cookieParser());
app.use("/", authRouter);
```

This makes endpoints like:

* `POST /signup`
* `POST /login`
* `POST /logout`

---

## 4ï¸âƒ£ Authentication APIs (Episode 2 Focus)

### Signup

* Validates input
* Hashes password using bcrypt
* Stores user in DB

### Login

* Verifies credentials
* Generates JWT
* Stores token in **httpOnly cookie**

### Logout

* Clears auth cookie

Auth flow was verified using `curl`:

```bash
curl -X POST http://localhost/api/signup
curl -X POST http://localhost/api/login
```

---

## 5ï¸âƒ£ PM2 Setup (Production Process Manager)

### Install PM2

```bash
sudo npm install -g pm2
```

### Start backend with PM2

```bash
pm2 start src/app.js --name gittogether-backend
```

### Verify

```bash
pm2 list
```

### Save & enable startup

```bash
pm2 save
pm2 startup
```

PM2 now:

* Keeps backend alive
* Restarts on crash
* Survives SSH disconnect & server reboot

---

## 6ï¸âƒ£ nginx Configuration

### nginx role

* Serves frontend (React build)
* Proxies backend APIs

### Backend proxy (`/api`)

```nginx
location /api {
    proxy_pass http://localhost:3000;
}
```

### Frontend

```nginx
root /var/www/html;
index index.html;
```

After changes:

```bash
sudo nginx -t
sudo systemctl reload nginx
```

---

## 7ï¸âƒ£ Frontend Deployment

* Built frontend locally or on server

```bash
npm run build
```

* Copied build to nginx root

```bash
sudo cp -r build/* /var/www/html/
```

Frontend now available at:

```
http://<PUBLIC_IP>
```

---

## 8ï¸âƒ£ Final Verification

### Backend (API)

```
http://<PUBLIC_IP>/api/signup
http://<PUBLIC_IP>/api/login
```

### Frontend

```
http://<PUBLIC_IP>
```

Login, signup, and logout were tested successfully.

---

## âœ… Deployment Status

âœ” Backend deployed with PM2
âœ” Frontend served via nginx
âœ” Reverse proxy working
âœ” Authentication working
âœ” Episode 2 objectives completed

---

## ğŸ§  Learning Outcome (Namaste Node â€“ S3 Ep 2)

* Understood request â†’ response lifecycle
* Learned real production deployment
* Used PM2 instead of `node app.js`
* Used nginx as reverse proxy
* Verified auth flow endâ€‘toâ€‘end

---

## ğŸ“Œ Next Steps (Future Episodes)

* Middleware deep dive (Episode 3)
* Protect routes using auth middleware
* Add HTTPS & domain (later)
* Logging & monitoring (later)

---

## ğŸ Conclusion

This deployment represents a **complete Levelâ€‘1 production deployment**.
The application is live, stable, and ready for further backend learning.

---

âœï¸ *Documented while learning Namaste Node â€“ Season 3*
